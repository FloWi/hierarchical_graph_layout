# graph layout experiments

Manual code (generated by claude) is kinda bad. The computation of the positions is not good.

##  graphviz vs. layout-crate

layout crate is awesome, easy to use API :)

the graphviz lib generates a slightly better graph
- fewer intersections
  - see edges originating at ALUMINIUM
- better routing
  - edge from ELECTRONICS to SHIP_PARTS

### graphviz output

```sh
dot -Tpng spacetraders.dot -o output.png
```

![output.png](output.png)

### sugiyama 

rust-sugiyama does a pretty decent job of computing the graph with little (unnecessary) crossings.
The crossing of ALUMINIUM--EQUIPMENT and PLASTICS--EQUIPMENT could be avoided, but hey. 
Good enough and pure rust, which makes me able to use it in wasm-land. 

Most of the svg rendering stuff has been generated by claude.

```sh
cargo run --bin sugiyama
```
![sugiyama.svg](sugiyama.svg)

### layout-crate output

```sh
cargo run --bin layout_engine
```

![img.png](screenshot_of_generated_svg.png)

#### debug output


```text
rank(rank idx: 0, inner_rank_idx: 0); (y: 49, x: 147); node: LIQUID_NITROGEN - X1-AD75-C40
rank(rank idx: 1, inner_rank_idx: 0); (y: 245, x: 147); node: QUARTZ_SAND - X1-AD75-XD5A
rank(rank idx: 2, inner_rank_idx: 0); (y: 343, x: 147); node: IRON_ORE - X1-AD75-XD5A
rank(rank idx: 3, inner_rank_idx: 0); (y: 441, x: 147); node: LIQUID_HYDROGEN - X1-AD75-C40
rank(rank idx: 4, inner_rank_idx: 0); (y: 539, x: 147); node: COPPER_ORE - X1-AD75-XD5A
rank(rank idx: 5, inner_rank_idx: 0); (y: 637, x: 147); node: SILICON_CRYSTALS - X1-AD75-XD5A
rank(rank idx: 0, inner_rank_idx: 1); (y: 49, x: 441); node: LIQUID_NITROGEN - X1-AD75-C41
rank(rank idx: 1, inner_rank_idx: 1); (y: 147, x: 441); node: ALUMINUM_ORE - X1-AD75-XD5A
rank(rank idx: 2, inner_rank_idx: 1); (y: 245, x: 441); node: QUARTZ_SAND - X1-AD75-H53
rank(rank idx: 3, inner_rank_idx: 1); (y: 343, x: 441); node: IRON - X1-AD75-H51
rank(rank idx: 4, inner_rank_idx: 1); (y: 441, x: 441); node: LIQUID_HYDROGEN - X1-AD75-C41
rank(rank idx: 5, inner_rank_idx: 1); (y: 539, x: 441); node: COPPER - X1-AD75-H51
rank(rank idx: 6, inner_rank_idx: 1); (y: 637, x: 441); node: SILICON_CRYSTALS - X1-AD75-H53
rank(rank idx: 0, inner_rank_idx: 2); (y: 49, x: 728); node: FERTILIZERS - X1-AD75-G50
rank(rank idx: 1, inner_rank_idx: 2); (y: 147, x: 728); node: ALUMINUM - X1-AD75-H51
rank(rank idx: 2, inner_rank_idx: 2); (y: 245, x: 728); node: FAB_MATS - X1-AD75-F49
rank(rank idx: 3, inner_rank_idx: 2); (y: 343, x: 728); node: MACHINERY - X1-AD75-E46
rank(rank idx: 4, inner_rank_idx: 2); (y: 441, x: 728); node: PLASTICS - X1-AD75-G50
rank(rank idx: 5, inner_rank_idx: 2); (y: 588, x: 728); node: MICROPROCESSORS - X1-AD75-A3
rank(rank idx: 6, inner_rank_idx: 2); (y: 686, x: 728); node: ELECTRONICS - X1-AD75-F49
rank(rank idx: 0, inner_rank_idx: 3); (y: 49, x: 1029); node: FABRICS - X1-AD75-E46
rank(rank idx: 1, inner_rank_idx: 3); (y: 343, x: 1029); node: SHIP_PLATING - X1-AD75-D44
rank(rank idx: 2, inner_rank_idx: 3); (y: 441, x: 1029); node: EQUIPMENT - X1-AD75-K81
rank(rank idx: 3, inner_rank_idx: 3); (y: 637, x: 1029); node: ADVANCED_CIRCUITRY - X1-AD75-D44
rank(rank idx: 0, inner_rank_idx: 4); (y: 49, x: 1302); node: CLOTHING - X1-AD75-K81
rank(rank idx: 1, inner_rank_idx: 4); (y: 441, x: 1302); node: SHIP_PARTS - X1-AD75-D43

```
